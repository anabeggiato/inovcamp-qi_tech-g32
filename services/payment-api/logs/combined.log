{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 12:53:44"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 12:54:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 13:41:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 13:41:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 13:41:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 13:52:48"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 13:53:04"}
{"installments":12,"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 13:53:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 13:53:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 13:53:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 13:53:24"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":0,"paidAmount":0,"pending":12,"remainingAmount":4079.3241476923517,"timestamp":"2025-10-04 13:53:24","totalAmount":5000,"totalInstallments":12}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 13:58:53"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 13:58:54"}
{"amount":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 2\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 14:02:07"}
{"amount":10000,"error":"connect ECONNREFUSED ::1:5432","investorId":"2","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 14:02:07"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:42:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","syscall":"connect","timestamp":"2025-10-04 14:02:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 14:02:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:02:25"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async transaction (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:58:20)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","syscall":"connect","timestamp":"2025-10-04 14:02:25"}
{"amount":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 2\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 14:03:32"}
{"amount":10000,"error":"connect ECONNREFUSED ::1:5432","investorId":"2","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 14:03:32"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:42:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","syscall":"connect","timestamp":"2025-10-04 14:03:32"}
{"amount":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 2\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 14:06:03"}
{"amount":10000,"error":"connect ECONNREFUSED ::1:5432","investorId":"2","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 14:06:03"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:42:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","syscall":"connect","timestamp":"2025-10-04 14:06:03"}
{"amount":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 2\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 14:06:40"}
{"amount":10000,"error":"connect ECONNREFUSED ::1:5432","investorId":"2","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 14:06:40"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:42:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","syscall":"connect","timestamp":"2025-10-04 14:06:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 14:36:00"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 14:36:00"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:37:10"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async transaction (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:20)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","syscall":"connect","timestamp":"2025-10-04 14:37:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 14:39:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 14:39:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:39:15"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async transaction (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:20)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","syscall":"connect","timestamp":"2025-10-04 14:39:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:39:31"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async transaction (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:20)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","syscall":"connect","timestamp":"2025-10-04 14:39:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 14:40:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 14:40:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo LOAN-123\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:40:59"}
{"address":"::1","code":"ECONNREFUSED","errno":-4078,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento connect ECONNREFUSED ::1:5432\u001b[39m","port":5432,"stack":"Error: connect ECONNREFUSED ::1:5432\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async transaction (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:68:20)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","syscall":"connect","timestamp":"2025-10-04 14:40:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 14:43:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 14:43:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 14:45:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 14:45:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 14:49:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 14:49:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo LOAN-123\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:49:25"}
{"code":"22P02","file":"numutils.c","length":151,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento invalid input syntax for type integer: \"LOAN-123\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"LOAN-123\"\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:83:13\n    at async transaction (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:71:24)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","timestamp":"2025-10-04 14:49:27","where":"unnamed portal parameter $7 = '...'"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 123\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:49:50"}
{"code":"23503","constraint":"installments_loan_id_foreign","detail":"Key (loan_id)=(123) is not present in table \"loans\".","file":"ri_triggers.c","length":278,"level":"\u001b[31merror\u001b[39m","line":"2599","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento insert or update on table \"installments\" violates foreign key constraint \"installments_loan_id_foreign\"\u001b[39m","name":"error","routine":"ri_ReportViolation","schema":"public","severity":"ERROR","stack":"error: insert or update on table \"installments\" violates foreign key constraint \"installments_loan_id_foreign\"\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:105:17\n    at async transaction (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:71:24)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","table":"installments","timestamp":"2025-10-04 14:49:51"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 14:52:18"}
{"installments":12,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 14:52:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:08:36"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:08:36"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 1\u001b[39m","timestamp":"2025-10-04 15:09:43"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 15:09:43"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento LOAN-123\u001b[39m","timestamp":"2025-10-04 15:09:59"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 15:09:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:15:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:15:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela INST-123\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 15:15:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:19:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:19:14"}
{"amount":500,"from_user_id":2,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:21:10","to_user_id":3}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:21:28"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:21:48"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:22:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento PAY-123\u001b[39m","timestamp":"2025-10-04 15:23:00"}
{"amount":500,"from_user_id":2,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:25:08","to_user_id":3}
{"amount":500,"entryId":"LEDGER_MGCLS7YZ_3GU7H","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 15:25:10","toAccount":"user_3"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:26:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:26:03"}
{"amount":500,"from_user_id":2,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:26:13","to_user_id":3}
{"amount":500,"entryId":"LEDGER_MGCLTMD2_TGXNJ","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 15:26:15","toAccount":"user_3"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:30:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:30:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:33:30"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:33:30"}
{"initial_balance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 15:33:56","user_id":2,"user_type":"investor"}
{"initialBalance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada\u001b[39m","timestamp":"2025-10-04 15:33:56","userId":2,"userType":"investor"}
{"initial_balance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 15:34:00","user_id":2,"user_type":"investor"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ACCOUNTS] Erro ao criar conta de custódia Conta de custódia já existe para este usuário\u001b[39m","stack":"Error: Conta de custódia já existe para este usuário\n    at Object.createCustodyAccount (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\custodyService.js:279:15)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody-accounts.js:24:46\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:175:3)","timestamp":"2025-10-04 15:34:00"}
{"initial_balance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 15:34:09","user_id":3,"user_type":"investor"}
{"initialBalance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada\u001b[39m","timestamp":"2025-10-04 15:34:09","userId":3,"userType":"investor"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 3\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:34:49"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ACCOUNTS] Erro ao depositar valor custodyService.depositToAccount is not a function\u001b[39m","stack":"TypeError: custodyService.depositToAccount is not a function\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody-accounts.js:76:46\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)","timestamp":"2025-10-04 15:34:49"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 3\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:35:12"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ACCOUNTS] Erro ao depositar valor custodyService.depositToAccount is not a function\u001b[39m","stack":"TypeError: custodyService.depositToAccount is not a function\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody-accounts.js:76:46\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)\n    at Function.process_params (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:421:3)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)","timestamp":"2025-10-04 15:35:12"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:38:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:38:29"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 3\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:38:35"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta criada automaticamente: user_3\u001b[39m","timestamp":"2025-10-04 15:38:35"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":500,"paymentMethod":"pix","timestamp":"2025-10-04 15:38:35","userId":"3"}
{"amount":100,"from_user_id":3,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:39:29","to_user_id":3}
{"amount":100,"entryId":"LEDGER_MGCMAOMS_W460E","fromAccount":"user_3","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 15:39:31","toAccount":"user_3"}
{"amount":100,"entryId":"LEDGER_MGCMAOMS_W460E","fromAccount":"user_3","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 15:39:32","toAccount":"user_3"}
{"amount":100,"description":"Pagamento teste","fromAccountId":"user_3","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 15:39:32","toAccountId":"user_3"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento PAY_MGCMAN30_9FYVE\u001b[39m","timestamp":"2025-10-04 15:40:28"}
{"amount":50,"from_user_id":3,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Transferindo valores entre contas\u001b[39m","timestamp":"2025-10-04 15:40:57","to_user_id":3}
{"amount":50,"description":"Transferência teste","fromAccountId":"user_3","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 15:40:58","toAccountId":"user_3"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento transactions\u001b[39m","timestamp":"2025-10-04 15:42:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento transactions\u001b[39m","timestamp":"2025-10-04 15:42:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento transactions\u001b[39m","timestamp":"2025-10-04 15:42:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento PAY_MGCMAN30_9FYVE\u001b[39m","timestamp":"2025-10-04 15:44:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:46:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:46:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:47:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:47:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:47:54"}
{"initial_balance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 15:48:18","user_id":4,"user_type":"investor"}
{"initialBalance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada\u001b[39m","timestamp":"2025-10-04 15:48:18","userId":4,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 2\u001b[39m","timestamp":"2025-10-04 15:48:27"}
{"initial_balance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 15:48:45","user_id":2,"user_type":"student"}
{"initialBalance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada\u001b[39m","timestamp":"2025-10-04 15:48:45","userId":2,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 2\u001b[39m","timestamp":"2025-10-04 15:48:52"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 2\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:49:07"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":2500,"paymentMethod":"pix","timestamp":"2025-10-04 15:49:07","userId":"2"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 4\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:49:33"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":2500,"paymentMethod":"pix","timestamp":"2025-10-04 15:49:33","userId":"4"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 4\u001b[39m","timestamp":"2025-10-04 15:50:02"}
{"amount":300,"from_user_id":4,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:50:56","to_user_id":2}
{"amount":300,"entryId":"LEDGER_MGCMPE8R_JH3AJ","fromAccount":"user_4","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 15:50:58","toAccount":"user_2"}
{"amount":300,"entryId":"LEDGER_MGCMPE8R_JH3AJ","fromAccount":"user_4","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 15:50:58","toAccount":"user_2"}
{"amount":300,"description":"Pagamento investidor para estudante","fromAccountId":"user_4","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 15:50:59","toAccountId":"user_2"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento PAY_MGCMPCOZ_UNXU\u001b[39m","timestamp":"2025-10-04 15:51:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento PAY_MGCMPCOZ_UNXUS\u001b[39m","timestamp":"2025-10-04 15:51:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:52:30"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:52:44"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:52:48"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:53:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento balance\u001b[39m","timestamp":"2025-10-04 15:55:30"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 15:56:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 15:56:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 2\u001b[39m","timestamp":"2025-10-04 15:56:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta criada automaticamente: user_2\u001b[39m","timestamp":"2025-10-04 15:56:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 4\u001b[39m","timestamp":"2025-10-04 15:56:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta criada automaticamente: user_4\u001b[39m","timestamp":"2025-10-04 15:56:38"}
{"initial_balance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 15:57:37","user_id":4,"user_type":"investor"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ACCOUNTS] Erro ao criar conta de custódia Conta de custódia já existe para este usuário\u001b[39m","stack":"Error: Conta de custódia já existe para este usuário\n    at Object.createCustodyAccount (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\custodyService.js:279:15)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody-accounts.js:24:46\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:175:3)","timestamp":"2025-10-04 15:57:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 4\u001b[39m","timestamp":"2025-10-04 15:58:22"}
{"amount":500,"from_user_id":4,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 15:59:13","to_user_id":2}
{"amount":500,"entryId":"LEDGER_MGCN01ZP_QTAQ4","fromAccount":"user_4","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 15:59:15","toAccount":"user_2"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 16:09:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 16:09:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 4\u001b[39m","timestamp":"2025-10-04 16:10:36"}
{"initial_balance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 16:13:45","user_id":5,"user_type":"investor"}
{"initialBalance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada\u001b[39m","timestamp":"2025-10-04 16:13:45","userId":5,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 16:16:34"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 16:16:34"}
{"initial_balance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 16:16:44","user_id":6,"user_type":"investor"}
{"cause":{},"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-SERVICE] Erro ao criar conta de custódia: Connection terminated due to connection timeout\u001b[39m","stack":"Error: Connection terminated due to connection timeout\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:52:24)\n    at async Object.createCustodyAccount (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\custodyService.js:284:26)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody-accounts.js:24:25","timestamp":"2025-10-04 16:16:49"}
{"cause":{},"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ACCOUNTS] Erro ao criar conta de custódia Connection terminated due to connection timeout\u001b[39m","stack":"Error: Connection terminated due to connection timeout\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:52:24)\n    at async Object.createCustodyAccount (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\custodyService.js:284:26)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody-accounts.js:24:25","timestamp":"2025-10-04 16:16:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 16:17:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 16:17:50"}
{"initial_balance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 16:17:53","user_id":6,"user_type":"investor"}
{"initialBalance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 16:17:55","userId":6,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 16:28:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 16:28:29"}
{"initial_balance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 16:28:52","user_id":7,"user_type":"student"}
{"initialBalance":2000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 16:28:55","userId":7,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 4\u001b[39m","timestamp":"2025-10-04 16:29:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 6\u001b[39m","timestamp":"2025-10-04 16:29:05"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 6\u001b[39m","timestamp":"2025-10-04 16:29:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 7\u001b[39m","timestamp":"2025-10-04 16:29:12"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 6\u001b[39m","timestamp":"2025-10-04 16:29:19"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 6\u001b[39m","timestamp":"2025-10-04 16:29:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 6\u001b[39m","timestamp":"2025-10-04 16:29:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 6\u001b[39m","timestamp":"2025-10-04 16:30:05"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 7\u001b[39m","timestamp":"2025-10-04 16:30:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 6\u001b[39m","timestamp":"2025-10-04 16:30:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 16:47:27"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 16:47:27"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 6\u001b[39m","timestamp":"2025-10-04 16:49:00"}
{"initial_balance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 16:51:56","user_id":10,"user_type":"student"}
{"initialBalance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 16:51:58","userId":10,"userType":"student"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 10\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 16:52:44"}
{"amount":500,"error":"null value in column \"id\" of relation \"custody_transactions\" violates not-null constraint","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-SERVICE] Erro ao depositar valor\u001b[39m","timestamp":"2025-10-04 16:52:52","userId":"10"}
{"code":"23502","column":"id","detail":"Failing row contains (null, user_10, deposit, 500.00, pix, Depósito via PIX, completed, 2025-10-04 19:52:45.398+00).","file":"execMain.c","length":305,"level":"\u001b[31merror\u001b[39m","line":"1981","message":"\u001b[31m[CUSTODY-ACCOUNTS] Erro ao depositar valor null value in column \"id\" of relation \"custody_transactions\" violates not-null constraint\u001b[39m","name":"error","routine":"ExecConstraints","schema":"public","severity":"ERROR","stack":"error: null value in column \"id\" of relation \"custody_transactions\" violates not-null constraint\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.depositToAccount (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\custodyService.js:482:9)\n    at async C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody-accounts.js:76:25","table":"custody_transactions","timestamp":"2025-10-04 16:52:52"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 16:55:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 16:55:21"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 10\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 16:55:27"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":2000,"paymentMethod":"pix","timestamp":"2025-10-04 16:55:29","userId":"10"}
{"amount":200,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Transferindo valores entre contas\u001b[39m","timestamp":"2025-10-04 16:56:18","to_user_id":6}
{"amount":200,"description":"Transferência teste","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 16:56:19","toAccountId":"user_6","transactionId":"TRANSFER_MGCP1GAI_81MO3"}
{"amount":100,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 16:56:44","to_user_id":6}
{"amount":100,"entryId":"LEDGER_MGCP2HEB_IHOWD","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 16:57:07","toAccount":"user_6"}
{"amount":100,"entryId":"LEDGER_MGCP2HEB_IHOWD","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 16:57:08","toAccount":"user_6"}
{"amount":100,"description":"Pagamento teste","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 16:57:10","toAccountId":"user_6","transactionId":"TRANSFER_MGCP2JK8_W3YON"}
{"amount":100,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 16:59:00","to_user_id":6}
{"amount":100,"entryId":"LEDGER_MGCP59C4_IKRD8","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 16:59:17","toAccount":"user_6"}
{"amount":100,"entryId":"LEDGER_MGCP59C4_IKRD8","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 16:59:17","toAccount":"user_6"}
{"amount":100,"description":"Pagamento teste","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 16:59:21","toAccountId":"user_6","transactionId":"TRANSFER_MGCP5CL0_AJFH8"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 16:59:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 16:59:57"}
{"amount":100,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 17:00:02","to_user_id":6}
{"amount":100,"entryId":"LEDGER_MGCP6GLO_YYEUU","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 17:00:13","toAccount":"user_6"}
{"amount":100,"entryId":"LEDGER_MGCP6GLO_YYEUU","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 17:00:14","toAccount":"user_6"}
{"amount":100,"description":"Pagamento teste","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 17:00:15","toAccountId":"user_6","transactionId":"TRANSFER_MGCP6HU2_VNBJF"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 10\u001b[39m","timestamp":"2025-10-04 17:01:58"}
{"amount":100,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 17:02:15","to_user_id":6}
{"amount":50,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 17:02:40","to_user_id":6}
{"amount":50,"entryId":"LEDGER_MGCP9UG0_V7V1H","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 17:02:51","toAccount":"user_6"}
{"amount":50,"entryId":"LEDGER_MGCP9UG0_V7V1H","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 17:02:51","toAccount":"user_6"}
{"amount":50,"description":"Teste pagamento","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 17:02:52","toAccountId":"user_6","transactionId":"TRANSFER_MGCP9VHU_0NOIM"}
{"amount":75,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 17:04:40","to_user_id":6}
{"amount":75,"entryId":"LEDGER_MGCPCA0K_ZG9AS","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 17:04:44","toAccount":"user_6"}
{"amount":75,"entryId":"LEDGER_MGCPCA0K_ZG9AS","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 17:04:45","toAccount":"user_6"}
{"amount":75,"description":"Teste pagamento com installment válido","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 17:04:46","toAccountId":"user_6","transactionId":"TRANSFER_MGCPCB4B_YNZXI"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 17:06:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 17:06:07"}
{"amount":100,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 17:06:15","to_user_id":6}
{"amount":100,"entryId":"LEDGER_MGCPEH74_TM8BD","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 17:06:27","toAccount":"user_6"}
{"amount":100,"entryId":"LEDGER_MGCPEH74_TM8BD","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 17:06:27","toAccount":"user_6"}
{"amount":100,"description":"Pagamento teste","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 17:06:28","toAccountId":"user_6","transactionId":"TRANSFER_MGCPEI7O_PGBDO"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando transações do usuário 10\u001b[39m","timestamp":"2025-10-04 17:07:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando taxas do usuário 10\u001b[39m","timestamp":"2025-10-04 17:08:31"}
{"amount":100,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 17:10:54","to_user_id":6}
{"amount":100,"from_user_id":10,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 17:11:45","to_user_id":6}
{"amount":100,"entryId":"LEDGER_MGCPLC5H_AJG8Z","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 17:11:47","toAccount":"user_6"}
{"amount":100,"entryId":"LEDGER_MGCPLC5H_AJG8Z","fromAccount":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 17:11:48","toAccount":"user_6"}
{"amount":100,"description":"Teste com taxas QI-EDU","fromAccountId":"user_10","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 17:11:48","toAccountId":"user_6","transactionId":"TRANSFER_MGCPLD9Y_Z4V35"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 17:12:56"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 17:12:56"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando taxas do usuário 10\u001b[39m","timestamp":"2025-10-04 17:13:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando transações do usuário 10\u001b[39m","timestamp":"2025-10-04 17:13:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 20:17:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 20:17:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 10\u001b[39m","timestamp":"2025-10-04 20:17:57"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\Documents\\GitHub\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:17:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 18:23:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 18:23:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando taxas do usuário 1\u001b[39m","timestamp":"2025-10-04 18:34:11"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 1\u001b[39m","timestamp":"2025-10-04 18:34:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta não encontrada no banco, criando automaticamente: user_1\u001b[39m","timestamp":"2025-10-04 18:34:14"}
{"initialBalance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 18:34:14","userId":1,"userType":"user"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando transações do usuário 1\u001b[39m","timestamp":"2025-10-04 18:34:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 19:41:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 19:41:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 19:45:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 19:45:03"}
{"initial_balance":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 19:47:45","user_id":1,"user_type":"investor"}
{"initialBalance":10000,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 19:47:47","userId":1,"userType":"investor"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 19:48:02","user_id":2,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 19:48:02","userId":2,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 19:48:17"}
{"amount":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 19:48:23"}
{"amount":10000,"error":"column \"balance\" does not exist","investorId":1,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 19:48:31"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"balance\" does not exist\u001b[39m","name":"error","position":"32","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column \"balance\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 19:48:31"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 19:56:05"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":5000,"paymentMethod":"pix","timestamp":"2025-10-04 19:56:07","userId":"1"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 19:56:13"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":10000,"paymentMethod":"pix","timestamp":"2025-10-04 19:56:14","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 1\u001b[39m","timestamp":"2025-10-04 19:56:18"}
{"error":"column u.user_type does not exist","investorId":"1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 19:56:24"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo column u.user_type does not exist\u001b[39m","name":"error","position":"219","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column u.user_type does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:210:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:50:25","timestamp":"2025-10-04 19:56:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 1\u001b[39m","timestamp":"2025-10-04 19:57:18"}
{"error":"column u.user_type does not exist","investorId":"1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 19:57:25"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo column u.user_type does not exist\u001b[39m","name":"error","position":"219","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column u.user_type does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:210:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:50:25","timestamp":"2025-10-04 19:57:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 20:00:16"}
{"error":"column u.user_type does not exist","investorId":"3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 20:00:23"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo column u.user_type does not exist\u001b[39m","name":"error","position":"219","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column u.user_type does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:210:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:50:25","timestamp":"2025-10-04 20:00:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 20:03:27"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 20:03:27"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 20:03:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo LOAN-001\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 20:04:09"}
{"code":"22P02","file":"numutils.c","length":151,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento invalid input syntax for type integer: \"LOAN-001\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"LOAN-001\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:83:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.createPaymentPlan (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:81:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:29","timestamp":"2025-10-04 20:04:11","where":"unnamed portal parameter $7 = '...'"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 20:08:59"}
{"installments":12,"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 20:09:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela INST-001\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 20:09:30"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 20:13:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 20:13:07"}
{"amount":500,"installmentId":"INST-002","level":"\u001b[32minfo\u001b[39m","loanId":"LOAN-001","message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 20:13:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","success":false,"timestamp":"2025-10-04 20:13:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento PAY-001\u001b[39m","timestamp":"2025-10-04 20:14:02"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:14:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento PAY-001\u001b[39m","timestamp":"2025-10-04 20:14:15"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:14:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento PAY-10\u001b[39m","timestamp":"2025-10-04 20:14:47"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:14:47"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 10\u001b[39m","timestamp":"2025-10-04 20:15:01"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:15:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 14\u001b[39m","timestamp":"2025-10-04 20:16:38"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:16:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 14\u001b[39m","timestamp":"2025-10-04 20:53:27"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:53:27"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 14\u001b[39m","timestamp":"2025-10-04 20:54:59"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 20:54:59"}
{"amount":500,"installmentId":"INST-001","level":"\u001b[32minfo\u001b[39m","loanId":"LOAN-001","message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 20:58:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","success":false,"timestamp":"2025-10-04 20:58:54"}
{"amount":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 2\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 21:00:57"}
{"amount":10000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":10000,"paymentMethod":"pix","timestamp":"2025-10-04 21:00:59","userId":"2"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 2\u001b[39m","timestamp":"2025-10-04 21:01:04"}
{"amount":500,"installmentId":"INST-001","level":"\u001b[32minfo\u001b[39m","loanId":"LOAN-001","message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:01:17"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor bloqueado\u001b[39m","reason":"Pagamento parcela INST-001","timestamp":"2025-10-04 21:01:17"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-METHODS] PIX gerado\u001b[39m","pixId":"PIX_MGCXSHDQ_8UOEU","recipient":"user_1","timestamp":"2025-10-04 21:01:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","paymentId":"PIX_MGCXSHDQ_8UOEU","success":true,"timestamp":"2025-10-04 21:01:17"}
{"amount":500,"category":"payment","entryId":"LEDGER_MGCXSHDV_XKOZU","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 21:01:19"}
{"amount":500,"entryId":"LEDGER_MGCXSHDV_XKOZU","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 21:01:19","toAccount":"user_1"}
{"amount":500,"entryId":"LEDGER_MGCXSHDV_XKOZU","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 21:01:19","toAccount":"user_1"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor liberado\u001b[39m","reason":"Pagamento recusado - INST-001","timestamp":"2025-10-04 21:01:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 10\u001b[39m","timestamp":"2025-10-04 21:02:08"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 21:02:08"}
{"amount":500,"installmentId":"INST-001","level":"\u001b[32minfo\u001b[39m","loanId":"LOAN-001","message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:08:20"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor bloqueado\u001b[39m","reason":"Pagamento parcela INST-001","timestamp":"2025-10-04 21:08:20"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-METHODS] PIX gerado\u001b[39m","pixId":"PIX_MGCY1JEA_NVS1Z","recipient":"user_1","timestamp":"2025-10-04 21:08:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","paymentId":"PIX_MGCY1JEA_NVS1Z","success":true,"timestamp":"2025-10-04 21:08:20"}
{"amount":500,"category":"payment","entryId":"LEDGER_MGCY1JEA_BJU3L","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 21:08:21"}
{"amount":500,"entryId":"LEDGER_MGCY1JEA_BJU3L","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 21:08:21","toAccount":"user_1"}
{"amount":500,"entryId":"LEDGER_MGCY1JEA_BJU3L","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 21:08:22","toAccount":"user_1"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor liberado\u001b[39m","reason":"Pagamento recusado - INST-001","timestamp":"2025-10-04 21:08:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento PIX_MGCY1JEA_NVS1Z\u001b[39m","timestamp":"2025-10-04 21:10:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário user_3\u001b[39m","timestamp":"2025-10-04 21:25:28"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo LOAN-001\u001b[39m","timestamp":"2025-10-04 21:25:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 14\u001b[39m","timestamp":"2025-10-04 21:26:15"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 21:26:15"}
{"amount":500,"installmentId":"INST-004","level":"\u001b[32minfo\u001b[39m","loanId":"LOAN-001","message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:26:22"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor bloqueado\u001b[39m","reason":"Pagamento parcela INST-004","timestamp":"2025-10-04 21:26:22"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-METHODS] PIX gerado\u001b[39m","pixId":"PIX_MGCYOQLI_8U9Z0","recipient":"user_3","timestamp":"2025-10-04 21:26:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","paymentId":"PIX_MGCYOQLI_8U9Z0","success":true,"timestamp":"2025-10-04 21:26:22"}
{"amount":500,"category":"payment","entryId":"LEDGER_MGCYOQLL_LPLJV","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 21:26:23"}
{"amount":500,"entryId":"LEDGER_MGCYOQLL_LPLJV","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 21:26:23","toAccount":"user_3"}
{"amount":500,"entryId":"LEDGER_MGCYOQLL_LPLJV","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 21:26:24","toAccount":"user_3"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor liberado\u001b[39m","reason":"Pagamento recusado - INST-004","timestamp":"2025-10-04 21:26:25"}
{"amount":500,"installmentId":"INST-004","level":"\u001b[32minfo\u001b[39m","loanId":"LOAN-001","message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:26:27"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor bloqueado\u001b[39m","reason":"Pagamento parcela INST-004","timestamp":"2025-10-04 21:26:27"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-METHODS] PIX gerado\u001b[39m","pixId":"PIX_MGCYOUAO_VQHIF","recipient":"user_3","timestamp":"2025-10-04 21:26:27"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","paymentId":"PIX_MGCYOUAO_VQHIF","success":true,"timestamp":"2025-10-04 21:26:27"}
{"amount":500,"category":"payment","entryId":"LEDGER_MGCYOUAS_DZ9TN","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 21:26:27"}
{"amount":500,"entryId":"LEDGER_MGCYOUAS_DZ9TN","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 21:26:27","toAccount":"user_3"}
{"amount":500,"entryId":"LEDGER_MGCYOUAS_DZ9TN","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 21:26:28","toAccount":"user_3"}
{"accountId":"user_2","amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Valor liberado\u001b[39m","reason":"Pagamento recusado - INST-004","timestamp":"2025-10-04 21:26:30"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo LOAN-001\u001b[39m","timestamp":"2025-10-04 21:28:17"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 21:30:17","user_id":1,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 21:30:19","userId":1,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 21:30:21"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 21:30:26"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":6000,"paymentMethod":"pix","timestamp":"2025-10-04 21:30:27","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor user_3\u001b[39m","timestamp":"2025-10-04 21:30:31"}
{"error":"column u.user_type does not exist","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 21:30:37"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo column u.user_type does not exist\u001b[39m","name":"error","position":"219","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column u.user_type does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:210:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:50:25","timestamp":"2025-10-04 21:30:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor user_3\u001b[39m","timestamp":"2025-10-04 21:30:39"}
{"error":"operator does not exist: text = integer","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao buscar depósitos\u001b[39m","timestamp":"2025-10-04 21:30:46"}
{"code":"42883","file":"parse_oper.c","hint":"No operator matches the given name and argument types. You might need to add explicit type casts.","length":200,"level":"\u001b[31merror\u001b[39m","line":"635","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar depósitos operator does not exist: text = integer\u001b[39m","name":"error","position":"280","routine":"op_error","severity":"ERROR","stack":"error: operator does not exist: text = integer\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorDeposits (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:182:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:70:26","timestamp":"2025-10-04 21:30:46"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor user_3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:30:50"}
{"amount":5000,"error":"column \"balance\" does not exist","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 21:30:57"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"balance\" does not exist\u001b[39m","name":"error","position":"32","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column \"balance\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 21:30:57"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor user_3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:33:58"}
{"amount":5000,"error":"column \"balance\" does not exist","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 21:34:05"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"balance\" does not exist\u001b[39m","name":"error","position":"32","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column \"balance\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 21:34:05"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor user_3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:34:45"}
{"amount":5000,"error":"column \"balance\" does not exist","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 21:34:51"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"balance\" does not exist\u001b[39m","name":"error","position":"32","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column \"balance\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 21:34:51"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 21:37:35","user_id":1,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 21:37:36","userId":1,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 21:37:38"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 21:37:40"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":6000,"paymentMethod":"pix","timestamp":"2025-10-04 21:37:40","userId":"1"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor user_3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:37:43"}
{"amount":5000,"error":"column \"balance\" does not exist","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 21:37:49"}
{"code":"42703","file":"parse_relation.c","length":107,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"balance\" does not exist\u001b[39m","name":"error","position":"32","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column \"balance\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 21:37:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor user_3\u001b[39m","timestamp":"2025-10-04 21:37:52"}
{"error":"column u.user_type does not exist","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 21:37:59"}
{"code":"42703","file":"parse_relation.c","length":110,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo column u.user_type does not exist\u001b[39m","name":"error","position":"219","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column u.user_type does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:210:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:50:25","timestamp":"2025-10-04 21:37:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor user_3\u001b[39m","timestamp":"2025-10-04 21:38:02"}
{"error":"operator does not exist: text = integer","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao buscar depósitos\u001b[39m","timestamp":"2025-10-04 21:38:08"}
{"code":"42883","file":"parse_oper.c","hint":"No operator matches the given name and argument types. You might need to add explicit type casts.","length":200,"level":"\u001b[31merror\u001b[39m","line":"635","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar depósitos operator does not exist: text = integer\u001b[39m","name":"error","position":"280","routine":"op_error","severity":"ERROR","stack":"error: operator does not exist: text = integer\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorDeposits (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:182:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:70:26","timestamp":"2025-10-04 21:38:08"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 21:38:18"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 24 parcelas\u001b[39m","timestamp":"2025-10-04 21:38:19"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo da instituição institution_1\u001b[39m","timestamp":"2025-10-04 21:38:21"}
{"error":"column i.email does not exist","institutionId":"institution_1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INSTITUTION-TRANSFERS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 21:38:26"}
{"code":"42703","file":"parse_relation.c","length":105,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo column i.email does not exist\u001b[39m","name":"error","position":"54","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column i.email does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInstitutionBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:217:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:123:25","timestamp":"2025-10-04 21:38:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando transferências da instituição institution_1\u001b[39m","timestamp":"2025-10-04 21:38:30"}
{"error":"column l.loan_id does not exist","institutionId":"institution_1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INSTITUTION-TRANSFERS] Erro ao buscar transferências\u001b[39m","timestamp":"2025-10-04 21:38:37"}
{"code":"42703","file":"parse_relation.c","length":108,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar transferências column l.loan_id does not exist\u001b[39m","name":"error","position":"209","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column l.loan_id does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInstitutionTransfers (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:188:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:143:27","timestamp":"2025-10-04 21:38:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 21:38:40"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":6,"paidAmount":3000,"pending":18,"remainingAmount":9000,"timestamp":"2025-10-04 21:38:41","totalAmount":5000,"totalInstallments":24}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento 1\u001b[39m","timestamp":"2025-10-04 21:38:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Webhook recebido para pagamento undefined\u001b[39m","status":"completed","timestamp":"2025-10-04 21:38:51"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENTS-MAIN] Erro ao processar webhook Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.handleWebhook (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:779:15)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments-main.js:211:45\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:175:3)","timestamp":"2025-10-04 21:38:51"}
{"amount":100,"from_user_id":2,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Transferindo valores entre contas\u001b[39m","timestamp":"2025-10-04 21:38:58","to_user_id":3}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 21:43:49","user_id":5,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 21:43:51","userId":5,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 2\u001b[39m","timestamp":"2025-10-04 21:43:52"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 2\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 21:43:55"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":1000,"paymentMethod":"pix","timestamp":"2025-10-04 21:43:56","userId":"2"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor user_3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:43:57"}
{"amount":5000,"error":"invalid input syntax for type integer: \"user_3\"","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 21:44:03"}
{"code":"22P02","file":"numutils.c","length":149,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito invalid input syntax for type integer: \"user_3\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"user_3\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:24:32)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 21:44:03","where":"unnamed portal parameter $1 = '...'"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor user_3\u001b[39m","timestamp":"2025-10-04 21:44:10"}
{"error":"invalid input syntax for type integer: \"user_3\"","investorId":"user_3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 21:44:17"}
{"code":"22P02","file":"numutils.c","length":149,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo invalid input syntax for type integer: \"user_3\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"user_3\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:210:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:50:25","timestamp":"2025-10-04 21:44:17","where":"unnamed portal parameter $1 = '...'"}
{"amount":5000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 21:44:22"}
{"amount":5000,"error":"column \"from_account\" of relation \"ledger\" does not exist","investorId":3,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 21:44:24"}
{"code":"42703","file":"parse_target.c","length":131,"level":"\u001b[31merror\u001b[39m","line":"1065","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"from_account\" of relation \"ledger\" does not exist\u001b[39m","name":"error","position":"41","routine":"checkInsertTargets","severity":"ERROR","stack":"error: column \"from_account\" of relation \"ledger\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:56:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:47:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 21:44:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 21:44:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 3\u001b[39m","timestamp":"2025-10-04 21:44:27"}
{"error":"operator does not exist: text = integer","investorId":"3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao buscar depósitos\u001b[39m","timestamp":"2025-10-04 21:44:33"}
{"code":"42883","file":"parse_oper.c","hint":"No operator matches the given name and argument types. You might need to add explicit type casts.","length":200,"level":"\u001b[31merror\u001b[39m","line":"635","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar depósitos operator does not exist: text = integer\u001b[39m","name":"error","position":"280","routine":"op_error","severity":"ERROR","stack":"error: operator does not exist: text = integer\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorDeposits (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:182:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:70:26","timestamp":"2025-10-04 21:44:33"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[CUSTODY-ROUTES] Processando transferência para instituição 1\u001b[39m","timestamp":"2025-10-04 21:44:37"}
{"amount":1000,"error":"column l.student_id does not exist","institutionId":1,"level":"\u001b[31merror\u001b[39m","loanId":1,"message":"\u001b[31m[INSTITUTION-TRANSFERS] Erro ao processar transferência\u001b[39m","timestamp":"2025-10-04 21:44:44"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar transferência column l.student_id does not exist\u001b[39m","name":"error","position":"169","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column l.student_id does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processLoanTransfer (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:24:28)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:97:24","timestamp":"2025-10-04 21:44:44"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 21:44:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 21:44:47"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo da instituição 1\u001b[39m","timestamp":"2025-10-04 21:44:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando transferências da instituição 1\u001b[39m","timestamp":"2025-10-04 21:44:52"}
{"error":"operator does not exist: integer = text","institutionId":"1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INSTITUTION-TRANSFERS] Erro ao buscar transferências\u001b[39m","timestamp":"2025-10-04 21:44:58"}
{"code":"42883","file":"parse_oper.c","hint":"No operator matches the given name and argument types. You might need to add explicit type casts.","length":200,"level":"\u001b[31merror\u001b[39m","line":"635","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar transferências operator does not exist: integer = text\u001b[39m","name":"error","position":"207","routine":"op_error","severity":"ERROR","stack":"error: operator does not exist: integer = text\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInstitutionTransfers (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:188:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:143:27","timestamp":"2025-10-04 21:44:58"}
{"amount":500,"installmentId":1,"institutionId":1,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando pagamento do estudante 2\u001b[39m","timestamp":"2025-10-04 21:44:59"}
{"amount":500,"error":"column \"updated_at\" of relation \"balances\" does not exist","institutionId":1,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INSTITUTION-TRANSFERS] Erro ao processar pagamento de estudante\u001b[39m","studentId":2,"timestamp":"2025-10-04 21:45:01"}
{"code":"42703","file":"analyze.c","length":133,"level":"\u001b[31merror\u001b[39m","line":"2528","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar pagamento column \"updated_at\" of relation \"balances\" does not exist\u001b[39m","name":"error","position":"63","routine":"transformUpdateTargetList","severity":"ERROR","stack":"error: column \"updated_at\" of relation \"balances\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:253:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.processStudentPayment (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:251:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:170:24","timestamp":"2025-10-04 21:45:01"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 21:45:02"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 21:45:02","totalAmount":5000,"totalInstallments":12}
{"amount":500,"from_user_id":2,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 21:45:09","to_user_id":3}
{"amount":499.2916666666667,"category":"payment","entryId":"LEDGER_MGCZCXWS_8X2VU","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 21:45:12"}
{"amount":499.2916666666667,"entryId":"LEDGER_MGCZCXWS_8X2VU","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 21:45:12","toAccount":"user_3"}
{"amount":0.5,"category":"fee","entryId":"LEDGER_MGCZCY27_B7DRJ","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 21:45:12"}
{"amount":0.5,"entryId":"LEDGER_MGCZCY27_B7DRJ","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 21:45:12","toAccount":"qi_edu_revenue"}
{"amount":0.20833333333333334,"category":"fee","entryId":"LEDGER_MGCZCY7M_411JD","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 21:45:12"}
{"amount":0.20833333333333334,"entryId":"LEDGER_MGCZCY7M_411JD","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 21:45:12","toAccount":"qi_edu_revenue"}
{"amount":499.2916666666667,"entryId":"LEDGER_MGCZCXWS_8X2VU","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 21:45:12","toAccount":"user_3"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento 1\u001b[39m","timestamp":"2025-10-04 21:45:12"}
{"amount":0.5,"entryId":"LEDGER_MGCZCY27_B7DRJ","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 21:45:12","toAccount":"qi_edu_revenue"}
{"amount":0.20833333333333334,"entryId":"LEDGER_MGCZCY7M_411JD","fromAccount":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 21:45:13","toAccount":"qi_edu_revenue"}
{"amount":499.2916666666667,"description":"Test payment (líquido)","fromAccountId":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 21:45:13","toAccountId":"user_3","transactionId":"TRANSFER_MGCZCZBQ_EWSMN"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Processando pagamento PAY-001\u001b[39m","timestamp":"2025-10-04 21:45:15"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENTS-MAIN] Erro ao processar pagamento Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.processPayment (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:692:15)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments-main.js:192:45\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:175:3)","timestamp":"2025-10-04 21:45:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Webhook recebido para pagamento undefined\u001b[39m","status":"completed","timestamp":"2025-10-04 21:45:19"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENTS-MAIN] Erro ao processar webhook Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.handleWebhook (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:779:15)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments-main.js:211:45\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:175:3)","timestamp":"2025-10-04 21:45:19"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 2\u001b[39m","timestamp":"2025-10-04 21:45:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando transações do usuário 2\u001b[39m","timestamp":"2025-10-04 21:45:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando taxas do usuário 2\u001b[39m","timestamp":"2025-10-04 21:45:26"}
{"amount":100,"from_user_id":2,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Transferindo valores entre contas\u001b[39m","timestamp":"2025-10-04 21:45:28","to_user_id":3}
{"amount":100,"description":"Transfer test","fromAccountId":"user_2","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 21:45:29","toAccountId":"user_3","transactionId":"TRANSFER_MGCZDBKW_C8V4Z"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[CUSTODY-ROUTES] Processando transferência para instituição 1\u001b[39m","timestamp":"2025-10-04 21:47:57"}
{"amount":1000,"error":"column l.student_id does not exist","institutionId":1,"level":"\u001b[31merror\u001b[39m","loanId":1,"message":"\u001b[31m[INSTITUTION-TRANSFERS] Erro ao processar transferência\u001b[39m","timestamp":"2025-10-04 21:48:04"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar transferência column l.student_id does not exist\u001b[39m","name":"error","position":"169","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column l.student_id does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processLoanTransfer (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:24:28)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:97:24","timestamp":"2025-10-04 21:48:04"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[CUSTODY-ROUTES] Processando transferência para instituição 1\u001b[39m","timestamp":"2025-10-04 21:48:17"}
{"amount":1000,"error":"column l.student_id does not exist","institutionId":1,"level":"\u001b[31merror\u001b[39m","loanId":1,"message":"\u001b[31m[INSTITUTION-TRANSFERS] Erro ao processar transferência\u001b[39m","timestamp":"2025-10-04 21:48:24"}
{"code":"42703","file":"parse_relation.c","length":111,"level":"\u001b[31merror\u001b[39m","line":"3716","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar transferência column l.student_id does not exist\u001b[39m","name":"error","position":"169","routine":"errorMissingColumn","severity":"ERROR","stack":"error: column l.student_id does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.processLoanTransfer (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\institutionTransfers.js:24:28)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:97:24","timestamp":"2025-10-04 21:48:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 21:58:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 21:58:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 22:11:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 22:11:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 22:22:28"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 22:22:28"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:22:40","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:22:41","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:22:41"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:22:41"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":6000,"paymentMethod":"pix","timestamp":"2025-10-04 22:22:42","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:22:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 22:22:42"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:22:42"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 22:22:43","totalAmount":5000,"totalInstallments":12}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:22:43"}
{"amount":500,"error":"Investidor não encontrado","investorId":1,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 22:22:43"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito Investidor não encontrado\u001b[39m","stack":"Error: Investidor não encontrado\n    at Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:31:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 22:22:43"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 1\u001b[39m","timestamp":"2025-10-04 22:22:43"}
{"error":"Investidor não encontrado","investorId":"1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao consultar saldo\u001b[39m","timestamp":"2025-10-04 22:22:43"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao consultar saldo Investidor não encontrado\u001b[39m","stack":"Error: Investidor não encontrado\n    at Object.getInvestorBalance (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:246:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:50:25","timestamp":"2025-10-04 22:22:43"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 1\u001b[39m","timestamp":"2025-10-04 22:22:43"}
{"error":"operator does not exist: text = integer","investorId":"1","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao buscar depósitos\u001b[39m","timestamp":"2025-10-04 22:22:49"}
{"code":"42883","file":"parse_oper.c","hint":"No operator matches the given name and argument types. You might need to add explicit type casts.","length":200,"level":"\u001b[31merror\u001b[39m","line":"635","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar depósitos operator does not exist: text = integer\u001b[39m","name":"error","position":"280","routine":"op_error","severity":"ERROR","stack":"error: operator does not exist: text = integer\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorDeposits (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:205:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:70:26","timestamp":"2025-10-04 22:22:49"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:28:03","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:28:05","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:28:05"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:28:05"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":7000,"paymentMethod":"pix","timestamp":"2025-10-04 22:28:06","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:28:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 22:28:06"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:28:06"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 22:28:06","totalAmount":5000,"totalInstallments":12}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:28:06"}
{"amount":500,"error":"column \"from_account\" of relation \"ledger\" does not exist","investorId":3,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 22:28:08"}
{"code":"42703","file":"parse_target.c","length":131,"level":"\u001b[31merror\u001b[39m","line":"1065","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"from_account\" of relation \"ledger\" does not exist\u001b[39m","name":"error","position":"41","routine":"checkInsertTargets","severity":"ERROR","stack":"error: column \"from_account\" of relation \"ledger\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:58:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:47:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 22:28:08"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 22:28:08"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 3\u001b[39m","timestamp":"2025-10-04 22:28:08"}
{"error":"operator does not exist: text = integer","investorId":"3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao buscar depósitos\u001b[39m","timestamp":"2025-10-04 22:28:15"}
{"code":"42883","file":"parse_oper.c","hint":"No operator matches the given name and argument types. You might need to add explicit type casts.","length":200,"level":"\u001b[31merror\u001b[39m","line":"635","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar depósitos operator does not exist: text = integer\u001b[39m","name":"error","position":"280","routine":"op_error","severity":"ERROR","stack":"error: operator does not exist: text = integer\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorDeposits (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:205:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:70:26","timestamp":"2025-10-04 22:28:15"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:28:36","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:28:38","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:28:38"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:28:38"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":8000,"paymentMethod":"pix","timestamp":"2025-10-04 22:28:39","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:28:39"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 22:28:39"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:28:39"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 22:28:40","totalAmount":5000,"totalInstallments":12}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:28:40"}
{"amount":500,"error":"column \"from_account\" of relation \"ledger\" does not exist","investorId":3,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 22:28:41"}
{"code":"42703","file":"parse_target.c","length":131,"level":"\u001b[31merror\u001b[39m","line":"1065","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito column \"from_account\" of relation \"ledger\" does not exist\u001b[39m","name":"error","position":"41","routine":"checkInsertTargets","severity":"ERROR","stack":"error: column \"from_account\" of relation \"ledger\" does not exist\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:58:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:47:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 22:28:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 22:28:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 3\u001b[39m","timestamp":"2025-10-04 22:28:42"}
{"error":"operator does not exist: text = integer","investorId":"3","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao buscar depósitos\u001b[39m","timestamp":"2025-10-04 22:28:48"}
{"code":"42883","file":"parse_oper.c","hint":"No operator matches the given name and argument types. You might need to add explicit type casts.","length":200,"level":"\u001b[31merror\u001b[39m","line":"635","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao listar depósitos operator does not exist: text = integer\u001b[39m","name":"error","position":"280","routine":"op_error","severity":"ERROR","stack":"error: operator does not exist: text = integer\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getInvestorDeposits (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:205:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:70:26","timestamp":"2025-10-04 22:28:48"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 22:29:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 22:29:25"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:29:28","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:29:30","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:29:30"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:29:30"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":9000,"paymentMethod":"pix","timestamp":"2025-10-04 22:29:31","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:29:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 22:29:31"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:29:31"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 22:29:31","totalAmount":5000,"totalInstallments":12}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:29:31"}
{"amount":500,"error":"invalid input syntax for type integer: \"PM_MGD0XYNW_EANIP\"","investorId":3,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 22:29:33"}
{"code":"22P02","file":"numutils.c","length":160,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito invalid input syntax for type integer: \"PM_MGD0XYNW_EANIP\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"PM_MGD0XYNW_EANIP\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:78:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:47:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 22:29:33","where":"unnamed portal parameter $1 = '...'"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 22:29:33"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 3\u001b[39m","timestamp":"2025-10-04 22:29:33"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:30:02","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:30:02","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:30:02"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:30:02"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":10000,"paymentMethod":"pix","timestamp":"2025-10-04 22:30:03","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:30:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 22:30:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:30:03"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 22:30:04","totalAmount":5000,"totalInstallments":12}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:30:04"}
{"amount":500,"error":"invalid input syntax for type integer: \"PM_MGD0YNNJ_GDTU1\"","investorId":3,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 22:30:05"}
{"code":"22P02","file":"numutils.c","length":160,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito invalid input syntax for type integer: \"PM_MGD0YNNJ_GDTU1\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"PM_MGD0YNNJ_GDTU1\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:78:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:47:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 22:30:05","where":"unnamed portal parameter $1 = '...'"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 22:30:05"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 3\u001b[39m","timestamp":"2025-10-04 22:30:05"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:30:18","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:30:18","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:30:18"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:30:19"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":11000,"paymentMethod":"pix","timestamp":"2025-10-04 22:30:19","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:30:19"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 22:30:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:30:20"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 22:30:20","totalAmount":5000,"totalInstallments":12}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:30:20"}
{"amount":500,"error":"invalid input syntax for type integer: \"PM_MGD0Z0JH_35Z86\"","investorId":3,"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[INVESTOR-DEPOSITS] Erro ao processar depósito\u001b[39m","timestamp":"2025-10-04 22:30:22"}
{"code":"22P02","file":"numutils.c","length":160,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[CUSTODY-ROUTES] Erro ao processar depósito invalid input syntax for type integer: \"PM_MGD0Z0JH_35Z86\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"PM_MGD0Z0JH_35Z86\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg\\lib\\client.js:545:17\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:78:13\n    at async transaction (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:90:24)\n    at async Object.processInvestorDeposit (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\investorDeposits.js:47:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\custody.js:24:24","timestamp":"2025-10-04 22:30:22","where":"unnamed portal parameter $1 = '...'"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 22:30:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 3\u001b[39m","timestamp":"2025-10-04 22:30:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 22:30:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 22:30:41"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:30:44","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:30:45","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:30:45"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:30:46"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":12000,"paymentMethod":"pix","timestamp":"2025-10-04 22:30:47","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:30:47"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 12 parcelas\u001b[39m","timestamp":"2025-10-04 22:30:47"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:30:47"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":3,"paidAmount":1500,"pending":9,"remainingAmount":4500,"timestamp":"2025-10-04 22:30:47","totalAmount":5000,"totalInstallments":12}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 3\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:30:47"}
{"amount":500,"depositId":"DEP_MGD0ZKXJ_WCXWZ","investorId":3,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INVESTOR-DEPOSITS] Depósito processado\u001b[39m","newBalance":11599.29,"timestamp":"2025-10-04 22:30:49"}
{"amount":500,"investorId":3,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Depósito processado com sucesso\u001b[39m","timestamp":"2025-10-04 22:30:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 3\u001b[39m","timestamp":"2025-10-04 22:30:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 3\u001b[39m","timestamp":"2025-10-04 22:30:50"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:35:46","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-04 22:35:48","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:35:48"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:35:48"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":1000,"paymentMethod":"pix","timestamp":"2025-10-04 22:35:49","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:35:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 22:35:49"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":0,"paidAmount":0,"pending":0,"remainingAmount":0,"timestamp":"2025-10-04 22:35:50","totalAmount":5000,"totalInstallments":0}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 7\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:35:50"}
{"amount":500,"depositId":"DEP_MGD162BR_TZA40","investorId":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INVESTOR-DEPOSITS] Depósito processado\u001b[39m","newBalance":1000,"timestamp":"2025-10-04 22:35:52"}
{"amount":500,"investorId":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Depósito processado com sucesso\u001b[39m","timestamp":"2025-10-04 22:35:52"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 7\u001b[39m","timestamp":"2025-10-04 22:35:52"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 7\u001b[39m","timestamp":"2025-10-04 22:35:52"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 22:36:01","user_id":1,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 22:36:01","userId":1,"userType":"investor"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 1\u001b[39m","timestamp":"2025-10-04 22:36:01"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 1\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 22:36:01"}
{"amount":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":2000,"paymentMethod":"pix","timestamp":"2025-10-04 22:36:02","userId":"1"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 2\u001b[39m","timestamp":"2025-10-04 22:36:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 24 parcelas\u001b[39m","timestamp":"2025-10-04 22:36:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 2\u001b[39m","timestamp":"2025-10-04 22:36:02"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"2","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":0,"paidAmount":0,"pending":24,"remainingAmount":18000,"timestamp":"2025-10-04 22:36:03","totalAmount":15000,"totalInstallments":24}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 7\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:36:03"}
{"amount":500,"depositId":"DEP_MGD16C7E_V5HU5","investorId":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INVESTOR-DEPOSITS] Depósito processado\u001b[39m","newBalance":1500,"timestamp":"2025-10-04 22:36:04"}
{"amount":500,"investorId":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Depósito processado com sucesso\u001b[39m","timestamp":"2025-10-04 22:36:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 7\u001b[39m","timestamp":"2025-10-04 22:36:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Listando depósitos do investidor 7\u001b[39m","timestamp":"2025-10-04 22:36:05"}
{"amount":100,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Processando depósito do investidor 7\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 22:41:47"}
{"amount":100,"depositId":"DEP_MGD1DPU1_M9UNC","investorId":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INVESTOR-DEPOSITS] Depósito processado\u001b[39m","newBalance":1200,"timestamp":"2025-10-04 22:41:50"}
{"amount":100,"investorId":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Depósito processado com sucesso\u001b[39m","timestamp":"2025-10-04 22:41:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ROUTES] Consultando saldo do investidor 7\u001b[39m","timestamp":"2025-10-04 22:41:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 23:01:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:01:49"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:02:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:02:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 23:02:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:02:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:05:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:05:40"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:08:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:08:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:09:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:09:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 23:09:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:09:41"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento Cannot read properties of undefined (reading 'due_date')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'due_date')\n    at createDuringStudiesPlan (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:180:39)\n    at Object.createPaymentPlan (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:64:27)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:50\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)","timestamp":"2025-10-04 23:09:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:09:46"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:11:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:11:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 23:12:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:12:14"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento Cannot read properties of undefined (reading 'due_date')\u001b[39m","stack":"TypeError: Cannot read properties of undefined (reading 'due_date')\n    at createDuringStudiesPlan (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:180:39)\n    at Object.createPaymentPlan (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:64:27)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:44:50\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)","timestamp":"2025-10-04 23:12:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:12:18"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:14:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:14:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:15:00"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:15:04"}
{"amount":750,"installmentId":1,"level":"\u001b[32minfo\u001b[39m","loanId":2,"message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:15:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","success":false,"timestamp":"2025-10-04 23:15:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 23:16:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:16:30"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:16:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:16:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:17:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:17:03"}
{"amount":750,"installmentId":1,"level":"\u001b[32minfo\u001b[39m","loanId":2,"message":"\u001b[32m[PAYMENT-ROUTES] Orquestrando pagamento completo\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:17:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Pagamento orquestrado\u001b[39m","success":false,"timestamp":"2025-10-04 23:17:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 14\u001b[39m","timestamp":"2025-10-04 23:17:13"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 23:17:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Consultando status do pagamento 1\u001b[39m","timestamp":"2025-10-04 23:17:17"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao consultar status Pagamento não encontrado\u001b[39m","stack":"Error: Pagamento não encontrado\n    at Object.getPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\payment-methods\\paymentMethods.js:173:15)\n    at Object.getOrchestratedPaymentStatus (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:587:42)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:148:39\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:365:14)\n    at param (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:376:14)","timestamp":"2025-10-04 23:17:17"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 2\u001b[39m","timestamp":"2025-10-04 23:17:24"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 24 parcelas\u001b[39m","timestamp":"2025-10-04 23:17:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 2\u001b[39m","timestamp":"2025-10-04 23:17:28"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"2","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":0,"paidAmount":0,"pending":24,"remainingAmount":18000,"timestamp":"2025-10-04 23:17:28","totalAmount":15000,"totalInstallments":24}
{"amount":750,"from_user_id":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 23:17:38","to_user_id":2}
{"amount":748.9375,"category":"payment","entryId":"LEDGER_MGD2NVEA_I2Z9P","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 23:17:40"}
{"amount":748.9375,"entryId":"LEDGER_MGD2NVEA_I2Z9P","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 23:17:40","toAccount":"user_2"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento PAY_MGD2NTI7_981M5\u001b[39m","timestamp":"2025-10-04 23:17:41"}
{"amount":0.75,"category":"fee","entryId":"LEDGER_MGD2NVJQ_LUAKG","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 23:17:41"}
{"amount":0.75,"entryId":"LEDGER_MGD2NVJQ_LUAKG","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 23:17:41","toAccount":"qi_edu_revenue"}
{"amount":0.3125,"category":"fee","entryId":"LEDGER_MGD2NVPA_UYBDT","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 23:17:41"}
{"amount":0.3125,"entryId":"LEDGER_MGD2NVPA_UYBDT","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 23:17:41","toAccount":"qi_edu_revenue"}
{"amount":748.9375,"entryId":"LEDGER_MGD2NVEA_I2Z9P","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 23:17:41","toAccount":"user_2"}
{"amount":0.75,"entryId":"LEDGER_MGD2NVJQ_LUAKG","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 23:17:41","toAccount":"qi_edu_revenue"}
{"amount":0.3125,"entryId":"LEDGER_MGD2NVPA_UYBDT","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 23:17:41","toAccount":"qi_edu_revenue"}
{"amount":748.9375,"description":"Teste pagamento (líquido)","fromAccountId":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 23:17:42","toAccountId":"user_2","transactionId":"TRANSFER_MGD2NWU0_ZXCAC"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 7\u001b[39m","timestamp":"2025-10-04 23:17:47"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando transações do usuário 7\u001b[39m","timestamp":"2025-10-04 23:17:50"}
{"amount":100,"from_user_id":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Transferindo valores entre contas\u001b[39m","timestamp":"2025-10-04 23:17:54","to_user_id":2}
{"amount":100,"description":"Transfer�ncia teste","fromAccountId":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 23:17:55","toAccountId":"user_2","transactionId":"TRANSFER_MGD2O73C_J9AFK"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando taxas do usuário 7\u001b[39m","timestamp":"2025-10-04 23:18:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Processando pagamento PAY_MGD2NTI7_981M5\u001b[39m","timestamp":"2025-10-04 23:18:07"}
{"external_id":"EXT_MGD2NV7K_HHC9I","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Webhook recebido para pagamento PAY_MGD2NTI7_981M5\u001b[39m","status":"completed","timestamp":"2025-10-04 23:18:12"}
{"amount":750,"error":"Saldo insuficiente para transferência","fromAccountId":"user_7","level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[CUSTODY-SERVICE] Erro ao transferir valores\u001b[39m","timestamp":"2025-10-04 23:18:12","toAccountId":"user_2"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENTS-MAIN] Erro ao processar webhook Saldo insuficiente para transferência\u001b[39m","stack":"Error: Saldo insuficiente para transferência\n    at Object.transferBetweenAccounts (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\custody\\custodyService.js:148:19)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.handleWebhook (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:788:9)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments-main.js:211:24","timestamp":"2025-10-04 23:18:12"}
{"initial_balance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 23:18:19","user_id":7,"user_type":"student"}
{"initialBalance":1000,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 23:18:19","userId":7,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 7\u001b[39m","timestamp":"2025-10-04 23:18:22"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 7\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 23:18:29"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":751.06,"paymentMethod":"pix","timestamp":"2025-10-04 23:18:29","userId":"7"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:36:13"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:36:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:37:16"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:37:18"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:38:23"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:38:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:39:03"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:39:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:39:56"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:39:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:40:02"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:40:03"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:40:36"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:40:37"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo undefined\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:40:51"}
{"installments":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:40:52"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:41:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:41:21"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 999\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:41:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: 999\u001b[39m","timestamp":"2025-10-04 23:41:26"}
{"level":"\u001b[31merror\u001b[39m","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento logger is not defined\u001b[39m","stack":"ReferenceError: logger is not defined\n    at Object.getLoanById (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:45:9)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:48:47\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:149:13)\n    at Route.dispatch (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\route.js:119:3)\n    at Layer.handle [as handle_request] (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\layer.js:95:5)\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:284:15\n    at Function.process_params (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:346:12)\n    at next (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:280:10)\n    at Function.handle (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\node_modules\\express\\lib\\router\\index.js:175:3)","timestamp":"2025-10-04 23:41:26"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:41:53"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:41:53"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 999\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:41:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: 999\u001b[39m","timestamp":"2025-10-04 23:41:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Buscando empréstimo ID: 999\u001b[39m","timestamp":"2025-10-04 23:41:58"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Resultado da query: []\u001b[39m","timestamp":"2025-10-04 23:41:59"}
{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[PAYMENT-SERVICE] Empréstimo 999 não encontrado\u001b[39m","timestamp":"2025-10-04 23:41:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 📊 Dados do empréstimo: null\u001b[39m","timestamp":"2025-10-04 23:41:59"}
{"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[PAYMENT-ROUTES] ❌ Empréstimo 999 não encontrado\u001b[39m","timestamp":"2025-10-04 23:41:59"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:42:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:42:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:42:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Resultado da query: [{\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T01:35:15.701Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":null,\"interest_rate\":null,\"due_day\":null,\"total_installments\":null,\"monthly_payment\":null,\"first_due_date\":null,\"last_due_date\":null,\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}]\u001b[39m","timestamp":"2025-10-04 23:42:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Empréstimo encontrado: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T01:35:15.701Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":null,\"interest_rate\":null,\"due_day\":null,\"total_installments\":null,\"monthly_payment\":null,\"first_due_date\":null,\"last_due_date\":null,\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:42:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 📊 Dados do empréstimo: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T01:35:15.701Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":null,\"interest_rate\":null,\"due_day\":null,\"total_installments\":null,\"monthly_payment\":null,\"first_due_date\":null,\"last_due_date\":null,\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:42:09"}
{"installments":12,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:42:13"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:42:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:42:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:42:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Resultado da query: [{\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:42:09.772Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:42:09.772Z\",\"interest_rate\":\"NaN\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}]\u001b[39m","timestamp":"2025-10-04 23:42:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Empréstimo encontrado: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:42:09.772Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:42:09.772Z\",\"interest_rate\":\"NaN\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:42:54"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 📊 Dados do empréstimo: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:42:09.772Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:42:09.772Z\",\"interest_rate\":\"NaN\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:42:54"}
{"installments":12,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:42:57"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo [object Object]\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:43:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: [object Object]\u001b[39m","timestamp":"2025-10-04 23:43:38"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Buscando empréstimo ID: [object Object]\u001b[39m","timestamp":"2025-10-04 23:43:38"}
{"code":"22P02","file":"numutils.c","length":206,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[PAYMENT-SERVICE] Erro ao buscar empréstimo invalid input syntax for type integer: \"{\"id\":\"1\",\"amount\":10000,\"term_months\":20,\"interest_rate\":0.02}\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"{\"id\":\"1\",\"amount\":10000,\"term_months\":20,\"interest_rate\":0.02}\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getLoanById (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:34:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:48:26","timestamp":"2025-10-04 23:43:44","where":"unnamed portal parameter $1 = '...'"}
{"code":"22P02","file":"numutils.c","length":206,"level":"\u001b[31merror\u001b[39m","line":"616","message":"\u001b[31m[PAYMENT-ROUTES] Erro ao criar plano de pagamento invalid input syntax for type integer: \"{\"id\":\"1\",\"amount\":10000,\"term_months\":20,\"interest_rate\":0.02}\"\u001b[39m","name":"error","routine":"pg_strtoint32_safe","severity":"ERROR","stack":"error: invalid input syntax for type integer: \"{\"id\":\"1\",\"amount\":10000,\"term_months\":20,\"interest_rate\":0.02}\"\n    at C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\node_modules\\pg-pool\\index.js:45:11\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async query (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\shared\\database.js:64:28)\n    at async Object.getLoanById (C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\services\\paymentService.js:34:24)\n    at async C:\\Users\\Inteli\\inovcamp-qi_tech-g32\\src\\apis-mock\\payment-api\\routes\\payments.js:48:26","timestamp":"2025-10-04 23:43:44","where":"unnamed portal parameter $1 = '...'"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Listando opções de pagamento\u001b[39m","timestamp":"2025-10-04 23:44:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:44:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:44:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:44:20"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Resultado da query: [{\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:42:54.531Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:42:54.531Z\",\"interest_rate\":\"NaN\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}]\u001b[39m","timestamp":"2025-10-04 23:44:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Empréstimo encontrado: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:42:54.531Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:42:54.531Z\",\"interest_rate\":\"NaN\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:44:22"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 📊 Dados do empréstimo: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:42:54.531Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:42:54.531Z\",\"interest_rate\":\"NaN\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:44:22"}
{"installments":12,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:44:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Processando pagamento da parcela 1\u001b[39m","paymentMethod":"pix","timestamp":"2025-10-04 23:44:32"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-04 23:45:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-04 23:45:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Listando parcelas do empréstimo 1\u001b[39m","timestamp":"2025-10-04 23:45:07"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Encontradas 36 parcelas\u001b[39m","timestamp":"2025-10-04 23:45:09"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[INSTALLMENT-ROUTES] Gerando resumo de pagamentos do empréstimo 1\u001b[39m","timestamp":"2025-10-04 23:45:13"}
{"level":"\u001b[32minfo\u001b[39m","loanId":"1","message":"\u001b[32m[INSTALLMENT-ROUTES] Resumo gerado com sucesso\u001b[39m","overdue":0,"paid":0,"paidAmount":0,"pending":36,"remainingAmount":null,"timestamp":"2025-10-04 23:45:13","totalAmount":5000,"totalInstallments":36}
{"amount":750,"from_user_id":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Criando novo pagamento\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 23:45:19","to_user_id":2}
{"amount":748.9375,"category":"payment","entryId":"LEDGER_MGD3NHBF_TP44I","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 23:45:22"}
{"amount":748.9375,"entryId":"LEDGER_MGD3NHBF_TP44I","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 23:45:22","toAccount":"user_2"}
{"amount":0.75,"category":"fee","entryId":"LEDGER_MGD3NHIY_EANEW","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 23:45:22"}
{"amount":0.75,"entryId":"LEDGER_MGD3NHIY_EANEW","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 23:45:22","toAccount":"qi_edu_revenue"}
{"amount":748.9375,"entryId":"LEDGER_MGD3NHBF_TP44I","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 23:45:22","toAccount":"user_2"}
{"amount":0.3125,"category":"fee","entryId":"LEDGER_MGD3NHOS_E3UX0","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry saved to database\u001b[39m","timestamp":"2025-10-04 23:45:22"}
{"amount":0.3125,"entryId":"LEDGER_MGD3NHOS_E3UX0","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry created\u001b[39m","timestamp":"2025-10-04 23:45:22","toAccount":"qi_edu_revenue"}
{"amount":0.75,"entryId":"LEDGER_MGD3NHIY_EANEW","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 23:45:23","toAccount":"qi_edu_revenue"}
{"amount":0.3125,"entryId":"LEDGER_MGD3NHOS_E3UX0","fromAccount":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] Ledger entry completed\u001b[39m","timestamp":"2025-10-04 23:45:23","toAccount":"qi_edu_revenue"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando pagamento PAY_MGD3NFG7_KDW1K\u001b[39m","timestamp":"2025-10-04 23:45:24"}
{"amount":748.9375,"description":"Teste pagamento (líquido)","fromAccountId":"user_7","level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Transferência realizada\u001b[39m","timestamp":"2025-10-04 23:45:24","toAccountId":"user_2","transactionId":"TRANSFER_MGD3NIWP_YG5J7"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando saldo do usuário 7\u001b[39m","timestamp":"2025-10-04 23:45:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Consultando transações do usuário 7\u001b[39m","timestamp":"2025-10-04 23:45:33"}
{"amount":50,"from_user_id":7,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENTS-MAIN] Transferindo valores entre contas\u001b[39m","timestamp":"2025-10-04 23:45:38","to_user_id":2}
{"initial_balance":1000,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-04 23:45:44","user_id":8,"user_type":"student"}
{"initialBalance":1000,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-04 23:45:45","userId":8,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Consultando conta de custódia do usuário 8\u001b[39m","timestamp":"2025-10-04 23:45:49"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Depositando valor na conta do usuário 8\u001b[39m","payment_method":"pix","timestamp":"2025-10-04 23:45:54"}
{"amount":500,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Depósito realizado\u001b[39m","newBalance":500,"paymentMethod":"pix","timestamp":"2025-10-04 23:45:54","userId":"8"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 1\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:49:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:49:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Buscando empréstimo ID: 1\u001b[39m","timestamp":"2025-10-04 23:49:14"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Resultado da query: [{\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:48:18.065Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:44:22.456Z\",\"interest_rate\":\"0.0200\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}]\u001b[39m","timestamp":"2025-10-04 23:49:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Empréstimo encontrado: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:48:18.065Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:44:22.456Z\",\"interest_rate\":\"0.0200\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:49:15"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 📊 Dados do empréstimo: {\"id\":1,\"borrower_id\":1,\"school_id\":1,\"custody_user_id\":5,\"amount\":\"5000\",\"term_months\":12,\"status\":\"disbursed\",\"contract_json\":null,\"origination_pct\":\"0.015\",\"marketplace_pct\":\"0.005\",\"custody_pct_monthly\":\"0.001\",\"spread_pct_annual\":\"0.005\",\"revenue_first_year\":\"185.00\",\"created_at\":\"2025-10-05T01:35:15.701Z\",\"updated_at\":\"2025-10-05T02:48:18.065Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":\"2025-10-05T02:44:22.456Z\",\"interest_rate\":\"0.0200\",\"due_day\":null,\"total_installments\":12,\"monthly_payment\":\"NaN\",\"first_due_date\":\"2026-02-05T03:00:00.000Z\",\"last_due_date\":\"2027-01-05T03:00:00.000Z\",\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":null,\"description\":null}\u001b[39m","timestamp":"2025-10-04 23:49:15"}
{"installments":12,"level":"\u001b[32minfo\u001b[39m","loanId":1,"message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:49:18"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] Criando plano de pagamento para empréstimo 2\u001b[39m","paymentTiming":"during_studies","timestamp":"2025-10-04 23:49:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 🔍 Buscando empréstimo ID: 2\u001b[39m","timestamp":"2025-10-04 23:49:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Buscando empréstimo ID: 2\u001b[39m","timestamp":"2025-10-04 23:49:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Resultado da query: [{\"id\":2,\"borrower_id\":8,\"school_id\":null,\"custody_user_id\":null,\"amount\":\"15000\",\"term_months\":24,\"status\":\"approved\",\"contract_json\":null,\"origination_pct\":null,\"marketplace_pct\":null,\"custody_pct_monthly\":null,\"spread_pct_annual\":null,\"revenue_first_year\":null,\"created_at\":\"2025-10-05T01:35:33.952Z\",\"updated_at\":\"2025-10-05T01:35:33.952Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":null,\"interest_rate\":\"0.0500\",\"due_day\":null,\"total_installments\":null,\"monthly_payment\":null,\"first_due_date\":null,\"last_due_date\":null,\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":\"PAYMENT-TEST-LOAN-001\",\"description\":\"Empréstimo teste para Payment API\"}]\u001b[39m","timestamp":"2025-10-04 23:49:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-SERVICE] Empréstimo encontrado: {\"id\":2,\"borrower_id\":8,\"school_id\":null,\"custody_user_id\":null,\"amount\":\"15000\",\"term_months\":24,\"status\":\"approved\",\"contract_json\":null,\"origination_pct\":null,\"marketplace_pct\":null,\"custody_pct_monthly\":null,\"spread_pct_annual\":null,\"revenue_first_year\":null,\"created_at\":\"2025-10-05T01:35:33.952Z\",\"updated_at\":\"2025-10-05T01:35:33.952Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":null,\"interest_rate\":\"0.0500\",\"due_day\":null,\"total_installments\":null,\"monthly_payment\":null,\"first_due_date\":null,\"last_due_date\":null,\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":\"PAYMENT-TEST-LOAN-001\",\"description\":\"Empréstimo teste para Payment API\"}\u001b[39m","timestamp":"2025-10-04 23:49:23"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-ROUTES] 📊 Dados do empréstimo: {\"id\":2,\"borrower_id\":8,\"school_id\":null,\"custody_user_id\":null,\"amount\":\"15000\",\"term_months\":24,\"status\":\"approved\",\"contract_json\":null,\"origination_pct\":null,\"marketplace_pct\":null,\"custody_pct_monthly\":null,\"spread_pct_annual\":null,\"revenue_first_year\":null,\"created_at\":\"2025-10-05T01:35:33.952Z\",\"updated_at\":\"2025-10-05T01:35:33.952Z\",\"payment_timing\":\"during_studies\",\"payment_timing_chosen_at\":null,\"interest_rate\":\"0.0500\",\"due_day\":null,\"total_installments\":null,\"monthly_payment\":null,\"first_due_date\":null,\"last_due_date\":null,\"graduation_date\":null,\"grace_period_months\":6,\"symbolic_payment_amount\":null,\"symbolic_payment_months\":null,\"loan_id\":\"PAYMENT-TEST-LOAN-001\",\"description\":\"Empréstimo teste para Payment API\"}\u001b[39m","timestamp":"2025-10-04 23:49:23"}
{"installments":24,"level":"\u001b[32minfo\u001b[39m","loanId":2,"message":"\u001b[32m[PAYMENT-ROUTES] Plano de pagamento criado com sucesso\u001b[39m","timestamp":"2025-10-04 23:49:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 02:24:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 02:24:25"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 07:00:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 07:00:41"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 07:04:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 07:04:50"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 07:09:51"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 07:09:51"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 07:19:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 07:19:10"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 07:26:04"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 07:26:04"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 07:28:26","user_id":15,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 07:28:29","userId":15,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 07:40:02"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 07:40:02"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 07:40:16","user_id":16,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-SERVICE] Conta de custódia criada no banco\u001b[39m","timestamp":"2025-10-05 07:40:17","userId":16,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 07:52:16"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 07:52:16"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 07:55:55","user_id":7,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 07:55:56","userId":7,"userType":"student"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 07:56:02","user_id":8,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 07:56:03","userId":8,"userType":"investor"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 07:56:38","user_id":9,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 07:56:38","userId":9,"userType":"student"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 07:57:00","user_id":10,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 07:57:00","userId":10,"userType":"student"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 08:11:02","user_id":7,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 08:11:04","userId":7,"userType":"student"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[LEDGER-SERVICE] System accounts initialized\u001b[39m","timestamp":"2025-10-05 08:52:29"}
{"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[PAYMENT-API] Payment API Mock rodando na porta 3002\u001b[39m","timestamp":"2025-10-05 08:52:30"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 08:54:35","user_id":9,"user_type":"investor"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 08:54:36","userId":9,"userType":"investor"}
{"initial_balance":0,"level":"\u001b[32minfo\u001b[39m","message":"\u001b[32m[CUSTODY-ACCOUNTS] Criando conta de custódia\u001b[39m","timestamp":"2025-10-05 09:04:54","user_id":10,"user_type":"student"}
{"initialBalance":0,"level":"\u001b[33mwarn\u001b[39m","message":"\u001b[33m[CUSTODY-SERVICE] Conta de custódia criada apenas em memória (banco indisponível)\u001b[39m","timestamp":"2025-10-05 09:04:55","userId":10,"userType":"student"}
